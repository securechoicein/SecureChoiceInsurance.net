<!DOCTYPE html>
<html lang="en" id="docHtml">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Colorado Relief Options â€” Home &amp; Auto Insurance</title>
  <meta name="description" content="Colorado residents: explore flexible home &amp; auto insurance options designed to protect your budget and peace of mind. Bundle, save, and see if you qualify for custom rate relief or flexible payments." />

  <!-- ================= QUICK SETUP =================
  REQUIRED FILES IN SAME FOLDER:
  - index.html
  - hero-house.png
  - hero-auto.png
  - hero-business.png
  ================================================== -->

  <script>
    // === REQUIRED: paste your deployed Google Apps Script Web App URL here ===
    window.GAS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbw5WUyuqjP6HODx88cSVY2ga2jhl7g29fRaqJb7OXneFH96lM0TyEGZxZdQtnD0dbOf4A/exec";

    // Optional separate LLM endpoint (usually leave blank to reuse GAS)
    window.POLICYPRO_LLM_ENDPOINT = "";

    // âœ… Default: run PolicyPro in LOCAL mode (no API keys required)
    window.POLICYPRO_MODE = "local";

    // Tracking (optional)
    window.GA4_MEASUREMENT_ID = "";
    window.GOOGLE_ADS_ID = "";
    window.GOOGLE_ADS_CONVERSION_LABEL = "";
    window.META_PIXEL_ID = "";

    window.AGENT_EMAIL = "securechoicein@gmail.com";

    // === ClickFunnels (recommended for "Check My Options") ===
    window.CLICKFUNNEL_URL = "";
  </script>

  <!-- Preload hero images for smoother first paint (PNG only) -->
  <link rel="preload" as="image" href="hero-house.png">
  <link rel="preload" as="image" href="hero-auto.png">
  <link rel="preload" as="image" href="hero-business.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --card:#0f172a;
      --line:rgba(148,196,255,.35);
      --brand:#38bdf8;
      --brand2:#0ea5e9;
      --ok:#22c55e;
      --warn:#facc15;

      /* Desktop hero fitting:
        - "contain" shows the full PNG (no cropping)
        - "cover" fills the hero (may crop)
      */
      --hero-fit-desktop: cover;
      --hero-bg-desktop: #000;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:Inter,system-ui,sans-serif;
      background:#0b1323;
      color:#e5e7eb;
      overflow-x:hidden;
    }

    /* HERO */
    .hero{
      position:relative;
      min-height:90vh;
      display:flex;
      align-items:center;
      justify-content:flex-start;
      padding:48px;
      overflow:hidden;
      isolation:isolate;
    }

    .hero-content{position:relative;max-width:680px;z-index:2;width:100%;}

    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(rgba(5,10,25,.55), rgba(5,10,25,.55));
      z-index:1;
      pointer-events:none;
    }

    /* Rotating background slides */
    .hero-rotator{
      position:absolute;
      inset:0;
      height:100%;
      z-index:0;
      pointer-events:none;
      background:transparent;
    }

    .hero-slide{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:50% 50%;
      opacity:0;
      filter: brightness(1.08) contrast(1.12) saturate(1.12);
      transition:opacity 900ms ease;
      will-change:opacity;
    }
    .hero-slide.active{ opacity:1; }

    /* Desktop hero fit */
    @media (min-width: 901px){
      .hero{ min-height:100vh; padding:72px 72px; }
      .hero-content{ max-width:760px; }
      .hero-rotator{ background: var(--hero-bg-desktop); }
      .hero-slide{
        object-fit: var(--hero-fit-desktop);
        object-position: 50% 45%;
        filter: brightness(1.12) contrast(1.15) saturate(1.15);
      }
    }

    @media (prefers-reduced-motion: reduce){
      .hero-slide{ transition:none; }
    }

    .badge{
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      background:rgba(56,189,248,.15);
      border:1px solid rgba(56,189,248,.4);
      font-size:12px;
      font-weight:700;
      color:#c7e9ff
    }

    .hero-headline{
      margin:0 0 18px;
      font-size:clamp(40px,6vw,72px);
      line-height:1.02;
      letter-spacing:.01em;
      color:#ffffff;
      font-family:'Playfair Display','Didot','Bodoni MT',serif;
      font-weight:700;
      text-shadow:0 18px 70px rgba(0,0,0,.55);
    }

    .hero-cta-wrap{display:flex;flex-direction:column;gap:10px;max-width:520px;}

    .cta{
      margin-top:24px;
      padding:14px 28px;
      font-size:16px;
      line-height:1.6;
      font-weight:700;
      border-radius:999px;
      border:1px solid #e5e7eb;
      cursor:pointer;
      background:#ffffff;
      color:#0b1120;
      font-family:'Playfair Display','Didot','Bodoni MT',serif;
      box-shadow:0 18px 55px rgba(0,0,0,.25);
      transition:transform .15s ease, box-shadow .15s ease, filter .15s ease, opacity .35s ease;
      opacity:1;
      transform:translateY(0);
    }
    .cta:hover{transform:translateY(-1px);box-shadow:0 22px 70px rgba(0,0,0,.28);filter:brightness(1.01);}
    .cta:active{transform:translateY(0);box-shadow:0 14px 40px rgba(0,0,0,.22);}

    /* Secondary CTA */
    .cta.cta-secondary{
      margin-top:0;
      background:rgba(255,255,255,.94);
      position:relative;
    }
    .cta.cta-secondary::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius:999px;
      background:linear-gradient(90deg, rgba(56,189,248,.75), rgba(34,197,94,.55), rgba(56,189,248,.75));
      z-index:-1;
      opacity:.85;
    }
    .cta.cta-secondary:hover{ filter:brightness(1.03); }

    /* Reveal effect for Check My Options */
    .cta-secondary{ opacity:0; pointer-events:none; transform:translateY(6px); }
    .cta-secondary.visible{ opacity:1 !important; pointer-events:auto !important; transform:translateY(0); }

    /* PHC hook (ChannelTalk-ish font) */
    .phc-hook-hero{
      margin:0 0 10px;
      font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      font-size:16px;
      font-weight:600;
      line-height:1.45;
      letter-spacing:-0.01em;
      color:#ffffff;
      text-shadow:0 12px 36px rgba(0,0,0,.45);
      opacity:.98;
      padding:12px 14px;
      border-radius:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(148,196,255,.35);
      box-shadow:0 18px 60px rgba(0,0,0,.26);
      position:relative;
      overflow:hidden;
    }
    .phc-hook-hero::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:radial-gradient(600px 180px at 18% 0%, rgba(56,189,248,.28), transparent 55%),
                 radial-gradient(420px 180px at 92% 10%, rgba(34,197,94,.14), transparent 60%);
      opacity:.95;
    }
    .phc-hook-hero.attn{ animation:phcGlow 2.4s ease-in-out 1; }
    @keyframes phcGlow{
      0%{transform:translateY(0); filter:saturate(1); opacity:.9;}
      45%{transform:translateY(-1px); filter:saturate(1.12); opacity:1;}
      70%{box-shadow:0 22px 80px rgba(56,189,248,.12), 0 18px 60px rgba(0,0,0,.26);}
      100%{transform:translateY(0); opacity:.98;}
    }

    .cta-micro{
      font-size:12px;
      font-weight:800;
      color:rgba(226,232,240,.92);
      text-shadow:0 10px 30px rgba(0,0,0,.45);
      letter-spacing:.01em;
    }

    @media (max-width: 900px){
      .hero{padding:18px;min-height:100vh;align-items:flex-start;padding-top:72px;}
      .hero-headline{font-size:clamp(34px,9vw,52px);}
      .hero-content{max-width:100%;padding-bottom:90px;}
      .hero-cta-wrap{max-width:520px;width:100%;}
      .cta{
        width:100%;
        max-width:520px;
        margin-top:10px;
        padding:14px 18px;
        font-size:15px;
        min-height:50px;
      }
      .cta-micro{font-size:12px;opacity:.95;}
    }

    /* ================== POLICY HEALTH CHECK ================== */
    .phc-wrap{
      max-width:960px;
      margin:32px auto 18px;
      padding:0 16px;
    }

    .phc-card{
      background:#ffffff;
      border-radius:20px;
      border:1px solid #e5e7eb;
      box-shadow:0 20px 60px rgba(2,6,23,.12);
      padding:22px 22px 18px;
    }

    .phc-header{display:flex;gap:14px;align-items:flex-start;margin-bottom:16px;}
    .phc-badge{
      flex:0 0 auto;width:36px;height:36px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      background:#0ea5e9;color:#fff;font-weight:900;
    }
    .phc-title{font-size:18px;font-weight:900;color:#0b1120;margin:0;}
    .phc-hook{margin:6px 0 0;font-size:13px;line-height:1.4;color:#475569;font-weight:700;}

    .phc-grid{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;}
    .phc-chip{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 14px;border-radius:16px;
      border:1px solid #e2e8f0;background:#f8fafc;color:#0b1120;
      font-weight:900;font-size:12.5px;cursor:pointer;
      box-shadow:0 12px 26px rgba(2,6,23,.06);
      -webkit-tap-highlight-color: transparent;
    }
    .phc-chip.active{
      border-color:#0ea5e9 !important;
      background:rgba(14,165,233,.10) !important;
    }
    .phc-chip input{transform:scale(1.05);}

    /* Desktop layout */
    @media (min-width: 1024px){
      .phc-wrap{ max-width:880px; }
      .phc-card{ padding:20px 20px 16px; }
    }

    /* Result */
    .phc-result{
      display:none;
      margin-top:14px;
      border:1px solid #e5e7eb;
      border-radius:18px;
      padding:14px 14px 12px;
      background:#ffffff;
      box-shadow:0 14px 40px rgba(2,6,23,.06);
    }
    .phc-result.show{display:block;}
    .phc-result-top{display:flex;align-items:center;justify-content:space-between;gap:12px;}
    .phc-result-left{display:flex;align-items:center;gap:10px;}
    .phc-dot{width:12px;height:12px;border-radius:999px;background:#22c55e;box-shadow:0 0 0 6px rgba(34,197,94,.12);}
    .phc-dot.yellow{background:#facc15;box-shadow:0 0 0 6px rgba(250,204,21,.16);}
    .phc-dot.red{background:#ef4444;box-shadow:0 0 0 6px rgba(239,68,68,.14);}
    .phc-result-label{font-weight:1000;color:#0b1120;font-size:12px;letter-spacing:.08em;text-transform:uppercase;}
    .phc-result-copy{margin:10px 0 8px;color:#0b1120;font-weight:900;font-size:13px;line-height:1.35;}

    .phc-subhead{
      margin:10px 0 6px;color:#0b1120;font-weight:700;font-size:13px;line-height:1.45;
      opacity:0;transform:translateY(6px);
      animation:phcSubheadIn .55s ease-out forwards;
      animation-delay:.15s;
    }
    .phc-subhead.green{ animation-delay:.1s; }
    .phc-subhead.red{ animation-delay:.28s; }
    @keyframes phcSubheadIn{ to{opacity:1;transform:translateY(0);} }

    .phc-result-why{margin:0;padding-left:18px;display:grid;gap:6px;}

    .phc-loyalty{display:none;margin-top:12px;padding:12px 12px;border-radius:16px;border:1px solid rgba(15,23,42,.12);background:linear-gradient(180deg, #ffffff, #f8fafc);box-shadow:0 12px 26px rgba(2,6,23,.06);}
    .phc-loyalty.show{display:block;}
    .phc-loyalty .m{font-weight:1000;color:#0b1120;font-size:13px;line-height:1.3;margin:0 0 10px;}

    .phc-result-actions{margin-top:12px;display:flex;gap:10px;align-items:center;justify-content:flex-end;flex-wrap:wrap;}

    /* ================== MODALS ================== */
    .modal-overlay{position:fixed;inset:0;background:rgba(2,6,23,.72);backdrop-filter:blur(6px);display:none;z-index:20000;}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:18px;z-index:21000;}
    .card{
      width:min(760px,96vw);
      background:#ffffff;
      color:#0b1323;
      border-radius:18px;
      box-shadow:0 40px 100px rgba(0,0,0,.8);
      overflow:hidden;
      border:1px solid #e5e7eb;
      max-height:86vh;
      display:flex;
      flex-direction:column;
    }
    .card-head{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;padding:14px 16px;background:#f8fafc;border-bottom:1px solid #e5e7eb;}
    .card-head h2{margin:0;font-size:16px;font-weight:900;}
    .card-head p{margin:2px 0 0;font-size:12px;color:#475569;}
    .icon-btn{background:transparent;border:none;font-size:18px;cursor:pointer;color:#475569;}
    .card-body{padding:14px 16px;overflow:auto;-webkit-overflow-scrolling:touch;}

    /* Desktop: keep modal usable by scrolling inside the card */
    @media (min-width: 601px){
      .card-head{position:sticky;top:0;z-index:3;}
      .card-body{max-height:calc(86vh - 64px);overflow:auto;}
      .row.row-desktop{position:sticky;bottom:0;left:0;right:0;background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,1) 32%);padding-top:12px;margin-top:12px;}
    }

    /* Mobile: bottom sheet */
    @media (max-width: 600px){
      .modal{align-items:flex-end;}
      .card{width:100%;max-width:100%;max-height:85vh;border-radius:18px 18px 0 0;}
      .card-head{position:sticky;top:0;z-index:2;}
    }

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    @media(max-width:740px){.grid{grid-template-columns:1fr;}}
    .field{display:grid;gap:6px;}
    .field label{font-size:12px;font-weight:900;color:#0f172a;}
    .field input,.field select,.field textarea{padding:12px;border-radius:12px;border:1px solid #cbd5e1;font-size:14px;}
    .field textarea{resize:vertical;min-height:90px;}
    .hint{font-size:11px;color:#64748b;font-weight:700;}
    .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;margin-top:12px;}
    .btn{padding:12px 14px;border-radius:12px;border:1px solid #cbd5e1;background:#fff;cursor:pointer;font-weight:900;}
    .btn-primary{border:1px solid #0b1120;background:#0b1120;color:#e5e7eb;}

    .status{display:none;margin-top:10px;font-size:12px;font-weight:800;}
    .status.ok{color:#166534;}
    .status.err{color:#b91c1c;}

    /* Stepper */
    .stepper{display:none;padding:12px 2px 10px;margin:0 0 8px;}
    .stepper-top{display:flex;align-items:baseline;justify-content:space-between;gap:10px;}
    .stepper-kicker{font-size:11px;font-weight:900;color:#64748b;letter-spacing:.02em;}
    .stepper-title{font-size:12px;font-weight:1000;color:#0b1120;}
    .stepper-dots{display:flex;gap:8px;margin-top:10px;}
    .dotx{width:10px;height:10px;border-radius:999px;background:#e2e8f0;}
    .dotx.active{background:#0b1120;}
    .stepper-bar{height:6px;border-radius:999px;background:#eef2f7;margin-top:10px;overflow:hidden;}
    .stepper-bar-fill{display:block;height:100%;width:25%;background:#0b1120;transition:width .2s ease;}
    .steps{margin-top:6px;}
    .step{display:none;}
    .step.active{display:block;}

    @media (min-width: 601px){
      .stepper{display:none;}
      .step{display:block;}
      .row-mobile{display:none !important;}
    }
    @media (max-width: 600px){
      .stepper{display:block;}
      .grid{grid-template-columns:1fr !important;}
      .row-desktop{display:none !important;}
      .row-mobile{
        position:sticky;bottom:0;left:0;right:0;padding:12px 0 0;
        background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,1) 28%);
        gap:10px;justify-content:space-between;
      }
      .row-mobile .btn{flex:1;}
    }

    /* Disclaimer */
    .disc-btn{
      position:fixed;left:18px;bottom:18px;z-index:26000;
      background:rgba(15,23,42,.85);backdrop-filter:blur(10px);
      border:1px solid rgba(148,196,255,.45);color:#e5e7eb;padding:10px 14px;
      border-radius:999px;font-weight:900;font-size:12px;cursor:pointer;
      box-shadow:0 16px 50px rgba(0,0,0,.6)
    }
    .disc-btn:hover{filter:brightness(1.06)}
    .disc-overlay{position:fixed;inset:0;background:rgba(2,6,23,.72);backdrop-filter:blur(6px);display:none;z-index:30000;}
    .disc-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:18px;z-index:31000;overflow:auto;}
    .disc-card{
      width:min(880px,96vw);max-height:86vh;background:#ffffff;color:#0b1323;border-radius:22px;
      box-shadow:0 50px 130px rgba(0,0,0,.85);overflow:hidden;border:1px solid rgba(148,196,255,.35);position:relative;
      display:flex;flex-direction:column;
    }
    .disc-card::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background:radial-gradient(1200px 500px at 20% -10%, rgba(56,189,248,.18), transparent 55%),
                 radial-gradient(900px 500px at 90% 10%, rgba(34,197,94,.14), transparent 55%);
    }
    .disc-head{
      position:relative;display:flex;align-items:flex-start;justify-content:space-between;gap:14px;
      padding:14px 16px;background:linear-gradient(180deg,#0b1120,#0f172a);
      border-bottom:1px solid rgba(148,196,255,.25);color:#e5e7eb;
    }
    .disc-head h2{margin:0;font-size:16px;font-weight:900;letter-spacing:.01em;}
    .disc-kicker{margin:4px 0 0;font-size:12px;color:rgba(226,232,240,.9);font-weight:800;max-width:66ch;line-height:1.35;}
    .disc-icon{width:34px;height:34px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;border:1px solid rgba(148,196,255,.45);background:rgba(15,23,42,.5);box-shadow:0 10px 30px rgba(0,0,0,.35);font-weight:900;}
    .disc-head-left{display:flex;gap:12px;align-items:flex-start;}
    .disc-close{background:rgba(248,250,252,.06);border:1px solid rgba(148,196,255,.35);color:#e5e7eb;border-radius:12px;padding:8px 10px;font-weight:900;cursor:pointer;}
    .disc-close:hover{filter:brightness(1.08)}
    .disc-body{
      position:relative;padding:14px 16px 12px;font-size:14px;line-height:1.55;color:#0b1120;
      overflow:auto;font-weight:700;flex:1;
    }
    .disc-body p{margin:0 0 10px;font-weight:700;color:#0b1120;}
    .disc-body strong{font-weight:900;color:#020617;}
    .disc-sections{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    @media(max-width:860px){.disc-sections{grid-template-columns:1fr;}}
    .disc-section{border:1px solid #e5e7eb;border-radius:16px;background:#ffffff;box-shadow:0 10px 26px rgba(0,0,0,.06);overflow:hidden;}
    .disc-sec-head{display:flex;gap:10px;align-items:flex-start;padding:12px 12px;background:linear-gradient(180deg,#ffffff,#f8fafc);border-bottom:1px solid #e5e7eb;}
    .disc-sec-badge{width:30px;height:30px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;font-weight:900;color:#0b1120;border:1px solid rgba(56,189,248,.35);background:rgba(56,189,248,.12);}
    .disc-sec-title{margin:0;font-size:13px;font-weight:900;color:#0b1120;}
    .disc-sec-sub{margin:2px 0 0;font-size:11px;color:#64748b;font-weight:800;line-height:1.35;}
    .disc-sec-body{padding:12px 12px 10px;font-size:13px;color:#0b1120;}
    .disc-sec-body ul{margin:0;padding-left:18px;display:grid;gap:8px;}
    .disc-footer-note{margin-top:12px;padding:12px;border-radius:16px;border:1px dashed rgba(15,23,42,.25);background:rgba(248,250,252,.9);font-size:12px;color:#0f172a;font-weight:800;}
    .disc-actions{position:relative;display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;background:linear-gradient(180deg,#f8fafc,#ffffff);border-top:1px solid #e5e7eb;}
    .btn-accept{border:1px solid rgba(34,197,94,.35);background:linear-gradient(180deg, rgba(34,197,94,.18), rgba(34,197,94,.08));color:#0b1120;}
    .btn-accept:hover{filter:brightness(1.03)}

    /* ================== CHAT ================== */
    .chat-launcher{
      position:fixed;right:20px;bottom:22px;z-index:26000;
      display:flex;align-items:center;gap:10px;cursor:pointer;user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .chat-peek{
      display:flex;flex-direction:column;gap:2px;
      padding:10px 12px;border-radius:14px;background:#ffffff;border:1px solid #e5e7eb;
      box-shadow:0 18px 55px rgba(0,0,0,.25);
    }
    .chat-peek .chat-label{
      font-size:11px;opacity:.85;font-weight:700;color:#0b1120;letter-spacing:.01em;
      font-family:'Playfair Display','Didot','Bodoni MT',serif;
    }
    .chat-peek .chat-name{
      font-weight:700;font-size:13px;letter-spacing:.01em;color:#0b1120;
      font-family:'Playfair Display','Didot','Bodoni MT',serif;
    }

    .chat-bubble{
      width:56px;height:56px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      background:#ffffff;border:1px solid #e5e7eb;box-shadow:0 22px 70px rgba(0,0,0,.25);
      position:relative;transition:transform .18s ease, filter .18s ease;
      animation: chatPulse 2.6s ease-in-out infinite;
    }
    .chat-bubble:hover{transform:translateY(-2px) scale(1.03);filter:brightness(1.06)}
    .chat-bubble:active{transform:translateY(0) scale(0.99)}
    .chat-avatar{
      width:44px;height:44px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      font-family:'Playfair Display', 'Didot', 'Bodoni MT', serif;font-weight:600;font-size:22px;color:#020617;background:#ffffff;
    }
    @keyframes chatPulse{
      0%{ box-shadow:0 22px 70px rgba(0,0,0,.25), 0 0 0 0 rgba(2,6,23,.15); }
      50%{ box-shadow:0 22px 70px rgba(0,0,0,.25), 0 0 0 12px rgba(2,6,23,0); }
      100%{ box-shadow:0 22px 70px rgba(0,0,0,.25), 0 0 0 0 rgba(2,6,23,0); }
    }

    .chat-window{
      display:none;position:fixed;right:20px;bottom:96px;width:360px;max-height:78vh;z-index:25000;
    }
    .pp-widget{
      width:100%;background:#fff;color:#0b1120;border-radius:22px;overflow:hidden;
      border:1px solid rgba(15,23,42,.10);box-shadow:0 40px 120px rgba(0,0,0,.42);
    }
    .pp-top{
      position:relative;height:150px;
      background:linear-gradient(180deg, rgba(2,6,23,0) 40%, rgba(2,6,23,.45) 100%),
              url('hero-house.png') center/cover no-repeat;
    }
    .pp-topbar{position:absolute;left:0;right:0;bottom:0;padding:14px 14px 12px;display:flex;align-items:flex-end;justify-content:space-between;gap:10px;}
    .pp-brand{color:#fff;font-weight:900;letter-spacing:.01em;font-size:18px;text-shadow:0 8px 30px rgba(0,0,0,.55);}
    .pp-body{padding:12px 14px 10px;background:#fff;}

    .pp-screen{display:none;}
    .pp-screen.active{display:block;}

    .pp-home-card{
      border:1px solid #eef2f7;border-radius:18px;padding:12px;background:#fff;
      box-shadow:0 14px 40px rgba(2,6,23,.06);
    }
    .pp-home-row{display:flex;gap:10px;align-items:flex-start}
    .pp-avatar{
      width:38px;height:38px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      border:1px solid #e5e7eb;background:#fff;font-family:'Playfair Display','Didot','Bodoni MT',serif;font-weight:700;color:#0b1120;flex:0 0 auto;
    }
    .pp-home-title{margin:0;font-weight:900;font-size:13.5px;line-height:1.25}
    .pp-home-sub{margin:6px 0 0;color:#475569;font-weight:700;font-size:12px;line-height:1.35}
    .pp-primary{
      width:100%;margin-top:12px;padding:12px;border-radius:999px;border:1px solid #eef2f7;background:#f3f4f6;
      color:#0b1120;font-weight:900;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;
    }

    .pp-messages-wrap{border:1px solid #eef2f7;border-radius:18px;overflow:hidden;background:#fff;}
    .chat-main{display:flex;flex-direction:column;height:360px;min-height:320px;}
    .chat-messages{padding:12px;overflow:auto;flex:1;background:#ffffff;}
    .msg{display:flex;margin:10px 0}
    .msg.user{justify-content:flex-end}
    .msg.bot{justify-content:flex-start}
    .bubble{max-width:86%;padding:10px 12px;border-radius:14px;font-size:13.5px;line-height:1.45;box-shadow:0 10px 26px rgba(0,0,0,.06)}
    .bubble.user{background:#0b1120;color:#e5e7eb;border-top-right-radius:6px}
    .bubble.bot{background:#ffffff;color:#0f172a;border:1px solid #e5e7eb;border-top-left-radius:6px}
    .chat-inputbar{padding:10px;border-top:1px solid #eef2f7;background:#fff;display:flex;gap:10px;align-items:center}
    .chat-input{flex:1;padding:12px 12px;border-radius:14px;border:1px solid #cbd5e1;font-size:14px;outline:none}
    .chat-input:focus{border-color:rgba(56,189,248,.9);box-shadow:0 0 0 4px rgba(56,189,248,.12)}
    .send-btn{padding:12px 14px;border-radius:14px;border:1px solid #0b1120;background:#0b1120;color:#e5e7eb;font-weight:1000;cursor:pointer}
    .send-btn:disabled{opacity:.55;cursor:not-allowed}

    .pp-tabs{
      display:grid;grid-template-columns:1fr 1fr 1fr;border-top:1px solid #eef2f7;background:#fff;padding:8px 6px;
    }
    .pp-tab{
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;
      padding:8px 6px;border-radius:14px;border:0;background:transparent;cursor:pointer;color:#64748b;
      font-weight:900;font-size:11px;
    }
    .pp-tab svg{width:18px;height:18px;opacity:.75;transition:transform .15s ease, opacity .15s ease}
    .pp-tab.active{color:#0b1120;background:#f8fafc;}
    .pp-tab:hover{color:#0b1120;background:#f8fafc}

    .pp-close-fab{
      position:absolute;right:10px;bottom:-62px;width:48px;height:48px;border-radius:999px;border:1px solid #e5e7eb;
      background:#fff;color:#0b1120;box-shadow:0 18px 60px rgba(0,0,0,.25);cursor:pointer;
      display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:900;
    }

    .pp-settings{border:1px solid #eef2f7;border-radius:18px;padding:12px;background:#fff;}
    .pp-settings h3{margin:0 0 10px;font-size:13.5px;font-weight:1000;color:#0b1120}
    .pp-setting-item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px;border:1px solid #eef2f7;border-radius:14px;background:#fff;margin-bottom:10px}
    .pp-select{
      appearance:none;-webkit-appearance:none;-moz-appearance:none;
      border:1px solid #e2e8f0;background:#f8fafc;color:#0b1120;font-weight:900;font-size:12px;border-radius:12px;
      padding:10px 34px 10px 12px;cursor:pointer;line-height:1;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23647569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat:no-repeat;background-position:right 10px center;background-size:18px 18px;
    }
    .pp-setting-link{display:block;text-align:center;margin-top:6px;color:#0ea5e9;font-weight:1000;text-decoration:none}

    @media (max-width: 900px){
      .chat-launcher{right:14px;bottom:calc(14px + env(safe-area-inset-bottom));}
      .chat-peek{display:none;}
      .chat-window{left:12px;right:12px;width:auto;bottom:calc(86px + env(safe-area-inset-bottom));max-height:78vh;}
      .disc-btn{left:14px;right:auto;bottom:calc(14px + env(safe-area-inset-bottom));padding:8px 12px;font-size:11px;opacity:.92;}
    }
  </style>
</head>

<body>

<section class="hero">
  <div class="hero-rotator" aria-hidden="true">
    <img class="hero-slide active" id="heroImg0" alt="" loading="eager" decoding="async" src="hero-house.png">
    <img class="hero-slide" id="heroImg1" alt="" loading="eager" decoding="async" src="hero-auto.png">
    <img class="hero-slide" id="heroImg2" alt="" loading="eager" decoding="async" src="hero-business.png">
  </div>

  <div class="hero-content">
    <h1 class="hero-headline" id="heroHeader" data-i18n="hero_header_home">Home Insurance</h1>

    <div class="hero-cta-wrap">
      <p class="phc-hook-hero attn" id="phcHook" data-i18n="phc_hook_v1">
        If your life looks different than when you started your policy, your coverage may not match anymore.
      </p>

      <button class="cta cta-secondary visible" id="openHealthCheck" type="button">30-Second Policy Health Check</button>
      <button class="cta cta-secondary" id="openFunnel" type="button" data-i18n="cta_check" aria-hidden="true">Check My Options</button>
      <div class="cta-micro" id="ctaMicro">2 minutes â€¢ Not a quote â€¢ Agent follow-up</div>
    </div>
  </div>
</section>

<!-- =====================
     POLICY HEALTH CHECK MODAL (SEPARATE TOOL)
     ===================== -->
<div class="modal-overlay" id="phcModalOverlay"></div>
<div class="modal" id="phcModal">
  <div class="card" role="dialog" aria-label="30-Second Policy Health Check">
    <div class="card-head">
      <div>
        <h2>30-Second Policy Health Check</h2>
        <p>General info only â€” a licensed agent reviews before any quote, application, binding, or policy change.</p>
      </div>
      <button class="icon-btn" id="phcCloseModal" type="button">âœ•</button>
    </div>

    <div class="card-body">
      <div class="phc-card">
        <div class="phc-header">
          <div class="phc-badge">âœ“</div>
          <div>
            <p class="phc-title">Policy Health Check</p>
            <p class="phc-hook">Answer a few quick questions to spot common coverage gaps (general info only; agent review required).</p>
          </div>
        </div>

        <div class="grid">
          <div class="field" style="grid-column:1 / -1;">
            <label>1) Any life changes in the last 12 months? (select all)</label>
            <div class="hint">Changes are the #1 reason policies stop matching real life.</div>
            <div class="phc-grid" id="phcChanges">
              <label class="phc-chip"><input type="checkbox" value="Moved/bought home">Moved/bought home</label>
              <label class="phc-chip"><input type="checkbox" value="New driver/teen driver">New driver/teen driver</label>
              <label class="phc-chip"><input type="checkbox" value="New vehicle/financed/leased">New vehicle/financed/leased</label>
              <label class="phc-chip"><input type="checkbox" value="Marriage/divorce/new baby">Marriage/divorce/new baby</label>
              <label class="phc-chip"><input type="checkbox" value="Work from home/home business">Work from home/home business</label>
              <label class="phc-chip"><input type="checkbox" value="Major remodel/new roof/solar">Major remodel/new roof/solar</label>
              <label class="phc-chip"><input type="checkbox" value="None">None</label>
            </div>
          </div>

          <div class="field">
            <label for="phcProperty">2) Property situation *</label>
            <select id="phcProperty">
              <option value="">Selectâ€¦</option>
              <option>Own a home</option>
              <option>Rent</option>
              <option>Condo/Townhome</option>
              <option>Landlord/Rental property</option>
              <option>Not sure</option>
            </select>
          </div>

          <div class="field">
            <label for="phcDeductible">3) Comfortable out-of-pocket if a claim happened tomorrow? *</label>
            <select id="phcDeductible">
              <option value="">Selectâ€¦</option>
              <option>$500â€“$1,000</option>
              <option>$1,000â€“$2,500</option>
              <option>$2,500â€“$5,000+</option>
              <option>Not sure</option>
            </select>
          </div>

          <div class="field">
            <label for="phcLiability">4) If you were sued after an accident/injury, how protected do you feel? *</label>
            <select id="phcLiability">
              <option value="">Selectâ€¦</option>
              <option>Very protected (high liability / umbrella)</option>
              <option>Somewhat protected</option>
              <option>Not protected / Not sure</option>
            </select>
          </div>

          <div class="field">
            <label for="phcReview">5) Last full policy review with a licensed agent? *</label>
            <select id="phcReview">
              <option value="">Selectâ€¦</option>
              <option>Within 12 months</option>
              <option>1â€“3 years ago</option>
              <option>3+ years ago / never</option>
              <option>Not sure</option>
            </select>
          </div>

          <div class="field" style="grid-column:1 / -1;">
            <label>Optional: Any property risk flags? (select all)</label>
            <div class="phc-grid" id="phcRisks">
              <label class="phc-chip"><input type="checkbox" value="Wildfire/brush nearby">Wildfire/brush nearby</label>
              <label class="phc-chip"><input type="checkbox" value="Hail-prone / roof 10+ yrs">Hail-prone / roof 10+ yrs</label>
              <label class="phc-chip"><input type="checkbox" value="Basement/sump pump">Basement/sump pump</label>
              <label class="phc-chip"><input type="checkbox" value="Pool/trampoline/dog">Pool/trampoline/dog</label>
              <label class="phc-chip"><input type="checkbox" value="Not sure">Not sure</label>
              <label class="phc-chip"><input type="checkbox" value="None">None</label>
            </div>
          </div>
        </div>

        <div class="phc-result" id="phcResult" aria-live="polite">
          <div class="phc-result-top">
            <div class="phc-result-left">
              <span class="phc-dot" id="phcDot" aria-hidden="true"></span>
              <div><div class="phc-result-label" id="phcLabel">Green</div></div>
            </div>
            <button class="btn" id="phcRun" type="button">Show my result</button>
          </div>

          <div class="phc-result-copy" id="phcCopy"></div>
          <div class="phc-subhead" id="phcSubhead">
            Most people don't switch because they're happy â€” they stay because nothing triggered a review. We help you check if your coverage still makes sense today.
          </div>
          <ul class="phc-result-why" id="phcWhy"></ul>

          <div class="phc-loyalty" id="phcLoyalty" aria-live="polite">
            <p class="m" id="phcLoyaltyMsg">Loyalty isn't the same as protection.</p>
            <button class="btn btn-primary" id="phcLeadCta" type="button">Check My Options</button>
          </div>

          <div class="phc-result-actions">
            <button class="btn btn-primary" id="phcCta" type="button">Continue to Options</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- =====================
     LEAD MODAL (fallback if CLICKFUNNEL_URL is blank)
     ===================== -->
<div class="modal-overlay" id="modalOverlay"></div>
<div class="modal" id="modal">
  <div class="card" role="dialog" aria-label="Options pre-check form">
    <div class="card-head">
      <div>
        <h2>Quick Options Pre-Check</h2>
        <p>2 minutes. Not a quote. A licensed agent reviews and follows up with carrier-agnostic options.</p>
      </div>
      <button class="icon-btn" id="closeModal" type="button">âœ•</button>
    </div>

    <div class="card-body">
      <form id="leadForm">

        <div class="stepper" id="stepper" aria-label="Form progress">
          <div class="stepper-top">
            <div class="stepper-kicker" id="stepperKicker">Step 1 of 4</div>
            <div class="stepper-title">A quick pre-check</div>
          </div>
          <div class="stepper-dots" role="presentation">
            <span class="dotx active" data-dot="0"></span>
            <span class="dotx" data-dot="1"></span>
            <span class="dotx" data-dot="2"></span>
            <span class="dotx" data-dot="3"></span>
          </div>
          <div class="stepper-bar" aria-hidden="true"><span class="stepper-bar-fill" id="stepperBarFill"></span></div>
        </div>

        <div class="steps" id="steps">
          <!-- STEP 1 -->
          <section class="step active" data-step="0" aria-label="Step 1">
            <div class="grid">
              <div class="field">
                <label for="firstName">First name *</label>
                <input id="firstName" name="firstName" autocomplete="given-name" required />
              </div>
              <div class="field">
                <label for="lastName">Last name *</label>
                <input id="lastName" name="lastName" autocomplete="family-name" required />
              </div>
              <div class="field" style="grid-column:1 / -1;">
                <label for="zip">ZIP *</label>
                <input id="zip" name="zip" inputmode="numeric" pattern="[0-9]{5}" placeholder="81501" required />
                <div class="hint">Example reference ZIP: 81501</div>
              </div>
            </div>
          </section>

          <!-- STEP 2 -->
          <section class="step" data-step="1" aria-label="Step 2">
            <div class="grid">
              <div class="field">
                <label for="email">Email *</label>
                <input id="email" name="email" type="email" autocomplete="email" required />
              </div>
              <div class="field">
                <label for="phone">Mobile phone *</label>
                <input id="phone" name="phone" type="tel" autocomplete="tel" required />
              </div>
              <div class="field">
                <label for="homeowner">Home status *</label>
                <select id="homeowner" name="homeowner" required>
                  <option value="">Selectâ€¦</option>
                  <option>Own</option>
                  <option>Rent</option>
                  <option>Buying soon</option>
                </select>
              </div>
              <div class="field">
                <label for="vehicles">Vehicles insured *</label>
                <select id="vehicles" name="vehicles" required>
                  <option value="">Selectâ€¦</option>
                  <option>1</option><option>2</option><option>3</option><option>4+</option>
                </select>
              </div>
              <div class="field" style="grid-column:1 / -1;">
                <label for="timeframe">When do you need this? *</label>
                <select id="timeframe" name="timeframe" required>
                  <option value="">Selectâ€¦</option>
                  <option>ASAP</option>
                  <option>Within 7 days</option>
                  <option>Within 30 days</option>
                  <option>Just exploring</option>
                </select>
              </div>
            </div>
          </section>

          <!-- STEP 3 -->
          <section class="step" data-step="2" aria-label="Step 3">
            <div class="grid">
              <div class="field" style="grid-column:1 / -1;">
                <label for="roofAge">Roof age</label>
                <select id="roofAge" name="roofAge">
                  <option value="">Selectâ€¦</option>
                  <option>0-5</option><option>6-10</option><option>11-15</option><option>16-20</option><option>21+</option><option>Not sure</option>
                </select>
              </div>
              <div class="field" style="grid-column:1 / -1;">
                <label for="notes">Notes (optional)</label>
                <textarea id="notes" name="notes" placeholder="Any details that help (hail claim history, wildfire concerns, bundling, etc.)"></textarea>
              </div>
            </div>
          </section>

          <!-- STEP 4 -->
          <section class="step" data-step="3" aria-label="Step 4">
            <div class="grid">
              <div class="field" style="grid-column:1 / -1;">
                <label style="display:flex;gap:10px;align-items:flex-start;font-weight:800;color:#0f172a;">
                  <input id="consent" name="consent" type="checkbox" required style="margin-top:2px;" />
                  I agree to be contacted by phone, SMS, and email about insurance options. Msg &amp; data rates may apply.
                </label>
              </div>
            </div>
          </section>
        </div>

        <!-- Desktop buttons -->
        <div class="row row-desktop" id="rowDesktop">
          <button class="btn" id="cancelBtn" type="button">Cancel</button>
          <button class="btn btn-primary" id="submitBtn" type="submit">Submit</button>
        </div>

        <!-- Mobile step buttons -->
        <div class="row row-mobile" id="rowMobile" aria-label="Step controls">
          <button class="btn" id="stepBack" type="button">Back</button>
          <button class="btn btn-primary" id="stepNext" type="button">Next</button>
          <button class="btn btn-primary" id="stepSubmit" type="submit" style="display:none;">Submit</button>
        </div>

        <div class="status" id="formStatus"></div>
      </form>
    </div>
  </div>
</div>

<!-- Disclaimer launcher -->
<button class="disc-btn" id="openDisclaimer" type="button" data-i18n="disclaimer_btn">Disclaimer</button>

<!-- Disclaimer modal -->
<div class="disc-overlay" id="discOverlay"></div>
<div class="disc-modal" id="discModal" role="dialog" aria-label="Legal disclaimer">
  <div class="disc-card">
    <div class="disc-head">
      <div class="disc-head-left">
        <div class="disc-icon">âš–</div>
        <div>
          <h2>Legal Disclaimer</h2>
          <div class="disc-kicker">Please review. This site includes AI-assisted information. <b>Human review is required</b> before any quote, application, binding, or policy change.</div>
        </div>
      </div>
      <button class="disc-close" id="discClose" type="button" aria-label="Close disclaimer">Close âœ•</button>
    </div>

    <div class="disc-body">
      <div class="disc-sections">
        <section class="disc-section">
          <div class="disc-sec-head">
            <div class="disc-sec-badge">i</div>
            <div>
              <p class="disc-sec-title">General information only</p>
              <p class="disc-sec-sub">Not legal, tax, or financial advice</p>
            </div>
          </div>
          <div class="disc-sec-body">
            <ul>
              <li>This page and <strong>PolicyProâ„¢</strong> provide <strong>general educational information</strong> about insurance concepts.</li>
              <li>Nothing here is legal advice, tax advice, or a substitute for professional guidance.</li>
              <li>Examples (including ZIP <strong>81501</strong>) are <strong>illustrative only</strong>.</li>
            </ul>
          </div>
        </section>

        <section class="disc-section">
          <div class="disc-sec-head">
            <div class="disc-sec-badge">AI</div>
            <div>
              <p class="disc-sec-title">AI disclosure</p>
              <p class="disc-sec-sub">AI output can be wrong or incomplete</p>
            </div>
          </div>
          <div class="disc-sec-body">
            <ul>
              <li><strong>PolicyProâ„¢</strong> includes automated and artificial-intelligenceâ€“generated responses for general informational purposes.</li>
              <li>AI output may be incomplete, inaccurate, or outdated and must not be relied upon as a definitive statement of coverage, pricing, underwriting eligibility, or claim outcome.</li>
              <li>AI responses do <strong>not</strong> replace advice from a licensed insurance producer.</li>
            </ul>
          </div>
        </section>

        <section class="disc-section">
          <div class="disc-sec-head">
            <div class="disc-sec-badge">âœ“</div>
            <div>
              <p class="disc-sec-title">Human review required</p>
              <p class="disc-sec-sub">Before quotes, applications, or changes</p>
            </div>
          </div>
          <div class="disc-sec-body">
            <ul>
              <li>Any quote indications, coverage discussions, or next steps require <strong>review and confirmation</strong> by a licensed insurance agent before any application is submitted or coverage is bound.</li>
              <li>Nothing on this page constitutes an offer to sell insurance or bind coverage.</li>
            </ul>
          </div>
        </section>

        <section class="disc-section">
          <div class="disc-sec-head">
            <div class="disc-sec-badge">ðŸ›¡</div>
            <div>
              <p class="disc-sec-title">Coverage &amp; claims limitations</p>
              <p class="disc-sec-sub">Carrier rules and policy terms control</p>
            </div>
          </div>
          <div class="disc-sec-body">
            <ul>
              <li>Coverage, eligibility, rates, discounts, underwriting, and availability vary by carrier and are subject to policy terms, conditions, exclusions, limits, and deductibles.</li>
              <li>Claim scenario walkthroughs are general and may not apply to your situation. Always follow your policy and carrier instructions. If there is immediate danger, call emergency services.</li>
            </ul>
          </div>
        </section>
      </div>

      <div class="disc-footer-note">
        <strong>Consent &amp; privacy:</strong> By submitting your information, you authorize contact by phone, SMS, and email about insurance options (msg &amp; data rates may apply). Information may be stored in a secure Google Sheet and emailed to the business inbox for follow-up. Do not submit sensitive information you do not want transmitted electronically.
      </div>
    </div>

    <div class="disc-actions">
      <button class="btn btn-accept" id="discAccept" type="button">I Accept</button>
      <button class="btn btn-primary" id="discClose2" type="button">Close</button>
    </div>
  </div>
</div>

<!-- Chat launcher -->
<div class="chat-launcher" id="chatBtn" aria-label="Open PolicyPro chat" title="Ask PolicyProâ„¢ a question">
  <div class="chat-peek" aria-hidden="true">
    <div class="chat-label" data-i18n="chat_peek_label">Need help?</div>
    <div class="chat-name" data-i18n="chat_peek_name">Chat with PolicyProâ„¢</div>
  </div>
  <div class="chat-bubble" role="button" aria-label="Chat bubble">
    <div class="chat-avatar">PP</div>
  </div>
</div>

<div class="chat-window" id="chatWindow" aria-label="PolicyPro widget" role="dialog">
  <div class="pp-widget">
    <div class="pp-top" aria-hidden="true">
      <div class="pp-topbar">
        <div class="pp-brand">PolicyProâ„¢</div>
      </div>
    </div>

    <div class="pp-body">
      <div class="pp-screen active" id="ppScreenHome">
        <div class="pp-home-card">
          <div class="pp-home-row">
            <div class="pp-avatar">PP</div>
            <div>
              <p class="pp-home-title" data-i18n="pp_home_title">Hi â€” how can we help?</p>
              <p class="pp-home-sub" data-i18n="pp_home_sub">Ask a Colorado home or auto insurance question. General info only â€” a licensed agent reviews before any quote, application, or binding.</p>
            </div>
          </div>
          <button class="pp-primary" id="ppStartChat" type="button"><span data-i18n="pp_start_chat">Start a chat</span> <span aria-hidden="true">âž¤</span></button>
        </div>
      </div>

      <div class="pp-screen" id="ppScreenMessages">
        <div class="pp-messages-wrap">
          <div class="chat-main">
            <div class="chat-messages" id="chatMessages" aria-live="polite"></div>

            <form class="chat-inputbar" id="chatForm" autocomplete="off">
              <input class="chat-input" id="chatInput" type="text" placeholder="Ask about hail deductibles, wildfire coverage, bundlingâ€¦" data-i18n-placeholder="chat_placeholder" />
              <button class="send-btn" id="chatSend" type="submit" data-i18n="chat_send">Send</button>
            </form>
          </div>
        </div>
      </div>

      <div class="pp-screen" id="ppScreenSettings">
        <div class="pp-settings">
          <h3 data-i18n="settings_title">Settings</h3>
          <div class="pp-setting-item"><div class="k" data-i18n="settings_contact">Contact</div><div class="v" id="ppAgentEmail">securechoicein@gmail.com</div></div>
          <div class="pp-setting-item">
            <div class="k" data-i18n="settings_language">Language</div>
            <div class="v">
              <select id="ppLangSelect" class="pp-select" aria-label="Select language">
                <option value="en">English</option>
                <option value="es">Spanish</option>
                <option value="ja">Japanese</option>
                <option value="zh">Chinese</option>
                <option value="fr">French</option>
                <option value="ru">Russian</option>
              </select>
            </div>
          </div>
          <div class="pp-setting-item"><div class="k" data-i18n="settings_disclaimer">Disclaimer</div><div class="v" data-i18n="settings_available">Available</div></div>
          <a class="pp-setting-link" href="#" id="ppOpenDisclaimerLink" data-i18n="settings_open_disclaimer">Open legal disclaimer</a>
        </div>
      </div>
    </div>

    <div class="pp-tabs" role="tablist" aria-label="Widget tabs">
      <button class="pp-tab active" id="ppTabHome" type="button" role="tab" aria-selected="true" aria-controls="ppScreenHome">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 10.5 12 3l9 7.5"/><path d="M5 10v10h14V10"/></svg>
        <span data-i18n="tab_home">Home</span>
      </button>
      <button class="pp-tab" id="ppTabMessages" type="button" role="tab" aria-selected="false" aria-controls="ppScreenMessages">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
        <span data-i18n="tab_messages">Messages</span>
      </button>
      <button class="pp-tab" id="ppTabSettings" type="button" role="tab" aria-selected="false" aria-controls="ppScreenSettings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/><path d="M19.4 15a1.7 1.7 0 0 0 .3 1.8l.1.1a2 2 0 0 1-1.4 3.4h-.2a1.8 1.8 0 0 0-1.7 1.3 2 2 0 0 1-3.8 0 1.8 1.8 0 0 0-1.7-1.3H9a2 2 0 0 1-1.4-3.4l.1-.1A1.7 1.7 0 0 0 8.6 15a1.8 1.8 0 0 0-.7-1.7 2 2 0 0 1 0-3.1 1.8 1.8 0 0 0 .7-1.7 1.7 1.7 0 0 0-.3-1.8l-.1-.1A2 2 0 0 1 9.6 3h.2a1.8 1.8 0 0 0 1.7-1.3 2 2 0 0 1 3.8 0 1.8 1.8 0 0 0 1.7 1.3h.2a2 2 0 0 1 1.4 3.4l-.1.1a1.7 1.7 0 0 0-.3 1.8 1.8 1.8 0 0 0 .7 1.7 2 2 0 0 1 0 3.1 1.8 1.8 0 0 0-.7 1.7"/></svg>
        <span data-i18n="tab_settings">Settings</span>
      </button>
    </div>
  </div>

  <button class="pp-close-fab" id="closeChat" aria-label="Close chat" type="button">âœ•</button>
</div>

<script>
  (function(){
    function onReady(fn){
      if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', fn);
      else fn();
    }
    function el(id){ return document.getElementById(id); }
    function safeText(s){ return String(s||'').trim(); }

    // =====================
    // HERO ROTATOR
    // =====================
    function startHeroRotator(){
      var imgs = [el('heroImg0'), el('heroImg1'), el('heroImg2')].filter(Boolean);
      if(imgs.length < 2) return;

      var header = el('heroHeader');
      var labels = ['Home Insurance', 'Car Insurance', 'Business Insurance'];

      var idx = 0;
      setInterval(function(){
        imgs[idx].classList.remove('active');
        idx = (idx + 1) % imgs.length;
        imgs[idx].classList.add('active');
        if(header) header.textContent = labels[idx] || 'Home Insurance';
      }, 5200);
    }

    // =====================
    // CTA REVEAL (mobile shows immediately)
    // =====================
    function wireRevealCTA(){
      var cta = el('openFunnel');
      var hcBtn = el('openHealthCheck');
      if(!cta) return;

      function reveal(){
        cta.classList.add('visible');
        cta.removeAttribute('aria-hidden');
      }

      // mobile: show immediately
      if(window.matchMedia && window.matchMedia('(max-width: 900px)').matches){
        reveal();
      } else {
        function onScroll(){
          if(window.scrollY > window.innerHeight * 0.15){
            reveal();
            window.removeEventListener('scroll', onScroll);
          }
        }
        window.addEventListener('scroll', onScroll, {passive:true});
      }

      if(hcBtn){
        hcBtn.addEventListener('click', reveal);
        hcBtn.addEventListener('touchend', function(){ reveal(); }, {passive:true});
      }
    }

    // =====================
    // CHECK MY OPTIONS open
    // =====================
    function wireLeadModal(){
      var openBtn = el('openFunnel');
      var modal = el('modal');
      var overlay = el('modalOverlay');
      var closeBtn = el('closeModal');
      var cancelBtn = el('cancelBtn');

      function openLead(){
        if(window.CLICKFUNNEL_URL && safeText(window.CLICKFUNNEL_URL) !== ''){
          window.open(window.CLICKFUNNEL_URL, '_blank', 'noopener');
          return;
        }
        if(overlay) overlay.style.display = 'block';
        if(modal) modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }
      function closeLead(){
        if(overlay) overlay.style.display = 'none';
        if(modal) modal.style.display = 'none';
        document.body.style.overflow = '';
      }

      window.__openLeadModal = openLead;

      if(openBtn){
        openBtn.addEventListener('click', function(e){ e.preventDefault(); openLead(); });
        openBtn.addEventListener('touchend', function(e){ e.preventDefault(); openLead(); }, {passive:false});
      }
      if(overlay) overlay.addEventListener('click', closeLead);
      if(closeBtn) closeBtn.addEventListener('click', closeLead);
      if(cancelBtn) cancelBtn.addEventListener('click', closeLead);
      document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeLead(); });
    }

    // =====================
    // Lead stepper (mobile)
    // =====================
    function wireStepper(){
      var stepsWrap = el('steps');
      var steps = stepsWrap ? Array.prototype.slice.call(stepsWrap.querySelectorAll('.step')) : [];
      if(!steps.length) return;

      var stepperKicker = el('stepperKicker');
      var bar = el('stepperBarFill');
      var dots = Array.prototype.slice.call(document.querySelectorAll('.dotx'));

      var back = el('stepBack');
      var next = el('stepNext');
      var submit = el('stepSubmit');

      var idx = 0;

      function setStep(n){
        idx = Math.max(0, Math.min(steps.length - 1, n));
        steps.forEach(function(s,i){ s.classList.toggle('active', i === idx); });

        dots.forEach(function(d,i){ d.classList.toggle('active', i === idx); });

        if(stepperKicker) stepperKicker.textContent = 'Step ' + (idx+1) + ' of ' + steps.length;
        if(bar) bar.style.width = ((idx+1)/steps.length * 100) + '%';

        if(back) back.disabled = (idx === 0);
        if(next) next.style.display = (idx === steps.length-1 ? 'none' : 'inline-flex');
        if(submit) submit.style.display = (idx === steps.length-1 ? 'inline-flex' : 'none');
      }

      function validateCurrentStep(){
        var current = steps[idx];
        if(!current) return true;
        var required = Array.prototype.slice.call(current.querySelectorAll('[required]'));
        for(var i=0;i<required.length;i++){
          var node = required[i];
          if(node.type === 'checkbox' && !node.checked){
            node.focus(); alert('Please agree to consent to continue.');
            return false;
          }
          if(node.value === ''){
            node.focus(); node.reportValidity && node.reportValidity();
            return false;
          }
        }
        return true;
      }

      if(back) back.addEventListener('click', function(){ setStep(idx-1); });
      if(next) next.addEventListener('click', function(){
        if(!validateCurrentStep()) return;
        setStep(idx+1);
      });

      setStep(0);
    }

    // =====================
    // Lead submit
    // =====================
    function wireLeadSubmit(){
      var form = el('leadForm');
      var statusEl = el('formStatus');
      var submitBtn = el('submitBtn');
      var stepSubmitBtn = el('stepSubmit');

      function showStatus(msg, kind){
        if(!statusEl) return;
        statusEl.className = 'status ' + (kind || '');
        statusEl.style.display = 'block';
        statusEl.textContent = msg;
      }
      function disableSubmit(disabled){
        if(submitBtn) submitBtn.disabled = disabled;
        if(stepSubmitBtn) stepSubmitBtn.disabled = disabled;
      }

      if(!form) return;

      form.addEventListener('submit', async function(e){
        e.preventDefault();

        if(!form.checkValidity()){
          form.reportValidity();
          showStatus('Please complete the required fields highlighted above.', 'err');
          return;
        }

        if(!window.GAS_WEBAPP_URL || safeText(window.GAS_WEBAPP_URL) === ''){
          showStatus('Missing GAS_WEBAPP_URL. Paste your Google Apps Script Web App URL in the header script.', 'err');
          return;
        }

        disableSubmit(true);
        showStatus('Submittingâ€¦', '');

        try{
          var fd = new FormData(form);
          fd.append('source', 'landing');
          fd.append('submittedAt', new Date().toISOString());
          fd.append('page', location.href);

          var res = await fetch(window.GAS_WEBAPP_URL, {
            method: 'POST',
            body: fd,
            mode: 'cors',
            credentials: 'omit'
          });

          var text = await res.text();
          if(!res.ok) throw new Error('HTTP ' + res.status + ': ' + text);

          showStatus('âœ… Submitted. Weâ€™ll follow up shortly.', 'ok');
          form.reset();

          // Close lead modal
          var modal = el('modal');
          var overlay = el('modalOverlay');
          if(overlay) overlay.style.display = 'none';
          if(modal) modal.style.display = 'none';
          document.body.style.overflow = '';

        } catch(err){
          console.error(err);
          showStatus('Submission failed. Please try again. (' + (err && err.message ? err.message : 'error') + ')', 'err');
        } finally {
          disableSubmit(false);
        }
      });
    }

    // =====================
    // Disclaimer modal
    // =====================
    function wireDisclaimer(){
      var open = el('openDisclaimer');
      var ov = el('discOverlay');
      var modal = el('discModal');
      var c1 = el('discClose');
      var c2 = el('discClose2');
      var acc = el('discAccept');

      function openD(){
        if(ov) ov.style.display = 'block';
        if(modal) modal.style.display = 'flex';
      }
      function closeD(){
        if(ov) ov.style.display = 'none';
        if(modal) modal.style.display = 'none';
      }
      if(open) open.addEventListener('click', openD);
      if(ov) ov.addEventListener('click', closeD);
      if(c1) c1.addEventListener('click', closeD);
      if(c2) c2.addEventListener('click', closeD);
      if(acc) acc.addEventListener('click', closeD);
    }

    // =====================
    // PHC modal + scoring
    // =====================
    function wirePHC(){
      var openBtn = el('openHealthCheck');
      var overlay = el('phcModalOverlay');
      var modal = el('phcModal');
      var closeBtn = el('phcCloseModal');

      function openPHC(){
        if(overlay) overlay.style.display = 'block';
        if(modal) modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }
      function closePHC(){
        if(overlay) overlay.style.display = 'none';
        if(modal) modal.style.display = 'none';
        document.body.style.overflow = '';
      }

      window.__closePHCModal = closePHC;

      if(openBtn){
        openBtn.addEventListener('click', function(e){ e.preventDefault(); openPHC(); });
        openBtn.addEventListener('touchend', function(e){ e.preventDefault(); openPHC(); }, {passive:false});
      }
      if(closeBtn) closeBtn.addEventListener('click', closePHC);
      if(overlay) overlay.addEventListener('click', closePHC);

      // Chip active styling
      function wireChipGroup(rootId){
        var root = el(rootId);
        if(!root) return;
        Array.prototype.slice.call(root.querySelectorAll('.phc-chip')).forEach(function(label){
          var input = label.querySelector('input');
          if(!input) return;

          function sync(){
            label.classList.toggle('active', !!input.checked);
          }
          sync();

          label.addEventListener('click', function(){
            // default checkbox toggles automatically
            setTimeout(sync, 0);

            // "None" clears others
            if(input.checked && input.value === 'None'){
              Array.prototype.slice.call(root.querySelectorAll('input[type="checkbox"]')).forEach(function(i){
                if(i !== input){ i.checked = false; }
              });
              Array.prototype.slice.call(root.querySelectorAll('.phc-chip')).forEach(function(l){
                var ii = l.querySelector('input');
                l.classList.toggle('active', !!(ii && ii.checked));
              });
            } else if(input.checked && input.value !== 'None'){
              // if any other selected, uncheck None
              Array.prototype.slice.call(root.querySelectorAll('input[type="checkbox"]')).forEach(function(i){
                if(i.value === 'None'){ i.checked = false; }
              });
              Array.prototype.slice.call(root.querySelectorAll('.phc-chip')).forEach(function(l){
                var ii = l.querySelector('input');
                l.classList.toggle('active', !!(ii && ii.checked));
              });
            }
          });
        });
      }
      wireChipGroup('phcChanges');
      wireChipGroup('phcRisks');

      function compute(){
        var changes = Array.prototype.slice.call(document.querySelectorAll('#phcChanges input[type="checkbox"]:checked')).map(function(i){return i.value;});
        var risks = Array.prototype.slice.call(document.querySelectorAll('#phcRisks input[type="checkbox"]:checked')).map(function(i){return i.value;});

        var property = safeText(el('phcProperty') && el('phcProperty').value);
        var deductible = safeText(el('phcDeductible') && el('phcDeductible').value);
        var liability = safeText(el('phcLiability') && el('phcLiability').value);
        var review = safeText(el('phcReview') && el('phcReview').value);

        var score = 0;

        var changeCount = (changes.indexOf('None') !== -1) ? 0 : changes.length;
        if(changeCount >= 1) score += 1;
        if(changeCount >= 3) score += 1;

        if(/Landlord|Rental property/i.test(property)) score += 1;
        if(/Not sure/i.test(property)) score += 1;

        if(/\$2,500â€“\$5,000\+|\$2,500â€“\$5,000\+/i.test(deductible)) score += 1;
        if(/Not sure/i.test(deductible)) score += 1;

        if(/Not protected|Not sure/i.test(liability)) score += 2;
        else if(/Somewhat/i.test(liability)) score += 1;

        if(/3\+ years/i.test(review)) score += 2;
        else if(/1â€“3/i.test(review)) score += 1;
        else if(/Not sure/i.test(review)) score += 1;

        var riskCount = (risks.indexOf('None') !== -1) ? 0 : risks.length;
        if(riskCount >= 1) score += 1;
        if(riskCount >= 3) score += 1;

        var label = 'Green';
        if(score >= 6) label = 'Red';
        else if(score >= 3) label = 'Yellow';

        var why = [];
        if(changeCount >= 1) why.push('Life changes are a top reason policies stop matching reality â€” a quick review can prevent surprise gaps.');
        if(/Not protected|Not sure/i.test(liability)) why.push('Liability uncertainty is a major â€œsilent riskâ€ â€” itâ€™s what protects your savings if youâ€™re sued.');
        if(/3\+ years/i.test(review)) why.push('If itâ€™s been 3+ years since a full review, you may be missing newer discounts and coverage improvements.');
        if(/\$2,500â€“\$5,000\+|Not sure/i.test(deductible)) why.push('Aligning deductibles helps avoid claim out-of-pocket sticker shock.');
        if(riskCount >= 1) why.push('Property risk flags can change what carriers require â€” confirming now avoids last-minute issues.');
        if(why.length === 0) why.push('Your answers look stable. An annual check still helps confirm youâ€™re not overpaying.');

        var copy = (label === 'Green')
          ? 'Coverage looks generally stable â€” a quick review can still confirm youâ€™re not overpaying.'
          : (label === 'Yellow')
            ? 'There are a few signals your coverage may not match your life today â€” worth a quick review.'
            : 'Multiple signals suggest potential gaps or misalignment â€” a review is strongly recommended.';

        return {label:label, copy:copy, why:why};
      }

      function render(result){
        var box = el('phcResult');
        var dot = el('phcDot');
        var lab = el('phcLabel');
        var copy = el('phcCopy');
        var why = el('phcWhy');
        var sub = el('phcSubhead');
        var loyalty = el('phcLoyalty');

        if(!box) return;
        box.classList.add('show');

        if(dot){
          dot.className = 'phc-dot' + (result.label === 'Yellow' ? ' yellow' : result.label === 'Red' ? ' red' : '');
        }
        if(lab) lab.textContent = result.label;
        if(copy) copy.textContent = result.copy;

        if(sub){
          sub.classList.remove('green','red');
          sub.classList.add(result.label === 'Red' ? 'red' : 'green');
        }

        if(why){
          why.innerHTML = '';
          result.why.slice(0,4).forEach(function(line){
            var li = document.createElement('li');
            li.textContent = line;
            why.appendChild(li);
          });
        }

        if(loyalty){
          if(result.label === 'Red') loyalty.classList.add('show');
          else loyalty.classList.remove('show');
        }
      }

      var run = el('phcRun');
      if(run){
        run.addEventListener('click', function(){
          var res = compute();
          render(res);
        });
      }

      var leadBtn = el('phcLeadCta');
      var contBtn = el('phcCta');
      function goLead(){
        closePHC();
        if(window.__openLeadModal) window.__openLeadModal();
      }
      if(leadBtn) leadBtn.addEventListener('click', goLead);
      if(contBtn) contBtn.addEventListener('click', goLead);
    }

    // =====================
    // PolicyPro chat JS (open + tabs + responder)
    // =====================
    function wireChat(){
      function appendMessage(kind, text){
        var list = el('chatMessages');
        if(!list) return;
        var wrap = document.createElement('div');
        wrap.className = 'msg ' + (kind === 'user' ? 'user' : 'bot');
        var bub = document.createElement('div');
        bub.className = 'bubble ' + (kind === 'user' ? 'user' : 'bot');
        if(kind === 'bot'){
          bub.innerHTML = String(text).replace(/\n/g,'<br>').replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>');
        } else {
          bub.textContent = String(text);
        }
        wrap.appendChild(bub);
        list.appendChild(wrap);
        list.scrollTop = list.scrollHeight;
      }

      function localAnswer(userText){
        var t = safeText(userText).toLowerCase();
        var disclaimer = "\n\nGeneral info only â€” a licensed agent reviews before any quote, application, binding, or policy change.";

        if(/hail|roof|deductible/.test(t)){
          return "Hail claims often come down to **your deductible type and amount** (flat vs %), roof age, and carrier rules. A quick review can confirm: (1) your hail deductible, (2) roof/ACV limitations, and (3) whether bundling unlocks better options." + disclaimer;
        }
        if(/wildfire|fire|brush/.test(t)){
          return "Wildfire eligibility is usually driven by **location risk score**, defensible space, roof type, and mitigation. Even if a carrier renews, options can change year-to-year â€” reviewing now avoids last-minute surprises." + disclaimer;
        }
        if(/bundle|bundling|multi\s*policy/.test(t)){
          return "Bundling home + auto can help with pricing and eligibility, but it depends on claim history, driver record, and property details. If you share your ZIP and current carrier, we can tell you what info is worth gathering before a review." + disclaimer;
        }
        if(/claim|claims|cancel|nonrenew|non-renew/.test(t)){
          return "If youâ€™ve had recent claims or a non-renewal notice, timing matters. The main levers are: claim type, date, paid amount, roof age, and mitigation. A quick options check can show which carriers are still competitive." + disclaimer;
        }
        if(/umbrella|liability|sued|lawsuit/.test(t)){
          return "Liability is what protects your savings if youâ€™re sued. Many households benefit from higher liability limits or an umbrella, especially with teen drivers, rental property, pools/trampolines, or higher net worth." + disclaimer;
        }
        return "I can help you sanity-check deductibles, liability, bundling, and common gaps. What are you optimizing for â€” **lowest monthly**, **best protection**, or **avoid surprise claim costs**?" + disclaimer;
      }

      function setScreen(screenId){
        ['ppScreenHome','ppScreenMessages','ppScreenSettings'].forEach(function(id){
          var s = el(id);
          if(s) s.classList.toggle('active', id === screenId);
        });
        [['ppTabHome','ppScreenHome'],['ppTabMessages','ppScreenMessages'],['ppTabSettings','ppScreenSettings']].forEach(function(pair){
          var tab = el(pair[0]);
          if(!tab) return;
          var active = (pair[1] === screenId);
          tab.classList.toggle('active', active);
          tab.setAttribute('aria-selected', active ? 'true' : 'false');
        });
      }

      function openChat(){ var w = el('chatWindow'); if(w) w.style.display = 'block'; setScreen('ppScreenHome'); }
      function closeChat(){ var w = el('chatWindow'); if(w) w.style.display = 'none'; }

      var launcher = el('chatBtn');
      var closeBtn = el('closeChat');
      var startBtn = el('ppStartChat');
      var form = el('chatForm');
      var input = el('chatInput');
      var sendBtn = el('chatSend');

      var agentEl = el('ppAgentEmail');
      if(agentEl && window.AGENT_EMAIL) agentEl.textContent = window.AGENT_EMAIL;

      var openDisc = el('ppOpenDisclaimerLink');
      if(openDisc){
        openDisc.addEventListener('click', function(e){
          e.preventDefault();
          var btn = el('openDisclaimer');
          if(btn) btn.click();
        });
      }

      if(launcher){
        launcher.addEventListener('click', function(e){ e.preventDefault(); openChat(); });
        launcher.addEventListener('touchend', function(e){ e.preventDefault(); openChat(); }, {passive:false});
      }
      if(closeBtn) closeBtn.addEventListener('click', function(e){ e.preventDefault(); closeChat(); });

      var tabHome = el('ppTabHome');
      var tabMsg  = el('ppTabMessages');
      var tabSet  = el('ppTabSettings');
      if(tabHome) tabHome.addEventListener('click', function(){ setScreen('ppScreenHome'); });
      if(tabMsg)  tabMsg.addEventListener('click', function(){ setScreen('ppScreenMessages'); });
      if(tabSet)  tabSet.addEventListener('click', function(){ setScreen('ppScreenSettings'); });

      if(startBtn){
        startBtn.addEventListener('click', function(){
          setScreen('ppScreenMessages');
          var list = el('chatMessages');
          if(list && list.children.length === 0){
            appendMessage('bot', "Hi â€” Iâ€™m PolicyProâ„¢. Ask me a question, or tap **Check My Options** to request an agent review.");
          }
          try{ input && input.focus(); }catch(_){}
        });
      }

      if(form){
        form.addEventListener('submit', function(e){
          e.preventDefault();
          var msg = safeText(input && input.value);
          if(!msg) return;

          appendMessage('user', msg);
          if(input) input.value = '';

          if(sendBtn) sendBtn.disabled = true;

          var reply = localAnswer(msg);
          appendMessage('bot', reply);

          appendMessage('bot', "Want an agent to check options? Tap **Check My Options**.");

          if(sendBtn) sendBtn.disabled = false;
        });
      }
    }

    onReady(function(){
      startHeroRotator();
      wireRevealCTA();
      wireLeadModal();
      wireStepper();
      wireLeadSubmit();
      wireDisclaimer();
      wirePHC();
      wireChat();
    });
  })();
</script>

</body>
</html>
